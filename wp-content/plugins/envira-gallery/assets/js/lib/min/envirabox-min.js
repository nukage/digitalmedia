!function(e,t,$,o){"use strict";function n(e){var t=e.currentTarget,o=e.data?e.data.options:{},n=e.data?e.data.items:[],i="",r=0;e.preventDefault(),e.stopPropagation(),$(t).attr("data-envirabox")&&(i=$(t).data("fancybox")),i?(n=n.length?n.filter('[data-envirabox="'+i+'"]'):$("[data-envirabox="+i+"]"),r=n.index(t)):n=[t],$.fancybox.open(n,o,r)}if($){var i={speed:330,loop:!0,opacity:"auto",margin:[44,0],gutter:30,infobar:!0,buttons:!0,slideShow:!0,fullScreen:!0,thumbs:!0,closeBtn:!0,smallBtn:"auto",image:{preload:"auto",protect:!1},ajax:{settings:{data:{fancybox:!0}}},iframe:{tpl:'<iframe id="envirabox-frame{rnd}" name="envirabox-frame{rnd}" class="envirabox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency="true" src=""></iframe>',preload:!0,scrolling:"no",css:{}},baseClass:"",slideClass:"",baseTpl:'<div class="envirabox-container" role="dialog" tabindex="-1"><div class="envirabox-bg"></div><div class="envirabox-controls"><div class="envirabox-infobar"><button data-envirabox-previous class="envirabox-button envirabox-button--left" title="Previous"></button><div class="envirabox-infobar__body"><span class="js-envirabox-index"></span>&nbsp;/&nbsp;<span class="js-envirabox-count"></span></div><button data-envirabox-next class="envirabox-button envirabox-button--right" title="Next"></button></div><div class="envirabox-buttons"><button data-envirabox-close class="envirabox-button envirabox-button--close" title="Close (Esc)"></button></div></div><div class="envirabox-slider-wrap"><div class="envirabox-slider"></div></div><div class="envirabox-caption-wrap"><div class="envirabox-caption"></div></div></div>',spinnerTpl:'<div class="envirabox-loading"></div>',errorTpl:'<div class="envirabox-error"><p>The requested content cannot be loaded. <br /> Please try again later.<p></div>',closeTpl:'<button data-envirabox-close class="envirabox-close-small"></button>',parentEl:"body",touch:!0,keyboard:!0,focus:!0,closeClickOutside:!0,beforeLoad:$.noop,afterLoad:$.noop,beforeMove:$.noop,afterMove:$.noop,onComplete:$.noop,onInit:$.noop,beforeClose:$.noop,afterClose:$.noop,onActivate:$.noop,onDeactivate:$.noop},r=$(e),s=$(t),a=0,l=function(e){return e&&e.hasOwnProperty&&e instanceof $},c=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}(),d=function(o){var n;return"function"==typeof $&&o instanceof $&&(o=o[0]),n=o.getBoundingClientRect(),n.bottom>0&&n.right>0&&n.left<(e.innerWidth||t.documentElement.clientWidth)&&n.top<(e.innerHeight||t.documentElement.clientHeight)},p=function(e,o,n){var r=this;r.opts=$.extend(!0,{index:n},i,o||{}),r.id=r.opts.id||++a,r.group=[],r.currIndex=parseInt(r.opts.index,10)||0,r.prevIndex=null,r.prevPos=null,r.currPos=0,r.firstRun=null,r.createGroup(e),r.group.length&&(r.$lastFocus=$(t.activeElement).blur(),r.slides={},r.init(e))};$.extend(p.prototype,{init:function(){var e=this,t=!1,o,n;e.scrollTop=s.scrollTop(),e.scrollLeft=s.scrollLeft(),$.fancybox.getInstance()||(o=$("body").width(),$("html").addClass("envirabox-enabled"),$.fancybox.isTouch?($.each(e.group,function(e,o){if("image"!==o.type&&"iframe"!==o.type)return t=!0,!1}),t&&$("body").css({position:"fixed",width:o,top:-1*e.scrollTop})):(o=$("body").width()-o)>1&&$('<style id="envirabox-noscroll" type="text/css">').html(".compensate-for-scrollbar, .envirabox-enabled body { margin-right: "+o+"px; }").appendTo("head")),n=$(e.opts.baseTpl).attr("id","envirabox-container-"+e.id).data("FancyBox",e).addClass(e.opts.baseClass).hide().prependTo(e.opts.parentEl),e.$refs={container:n,bg:n.find(".envirabox-bg"),controls:n.find(".envirabox-controls"),buttons:n.find(".envirabox-buttons"),slider_wrap:n.find(".envirabox-slider-wrap"),slider:n.find(".envirabox-slider"),caption:n.find(".envirabox-caption")},e.trigger("onInit"),e.activate(),e.current||e.jumpTo(e.currIndex)},createGroup:function(e){var t=this,o=$.makeArray(e);$.each(o,function(e,o){var n={},i={},r=[],s,a,l,c;$.isPlainObject(o)?(n=o,i=o.opts||{}):"object"===$.type(o)&&$(o).length?(s=$(o),r=s.data(),i="options"in r?r.options:{},i="object"===$.type(i)?i:{},n.type="type"in r?r.type:i.type,n.src="src"in r?r.src:i.src||s.attr("href"),i.width="width"in r?r.width:i.width,i.height="height"in r?r.height:i.height,i.thumb="thumb"in r?r.thumb:i.thumb,i.selector="selector"in r?r.selector:i.selector,"srcset"in r&&(i.image={srcset:r.srcset}),i.$orig=s):n={type:"html",content:o+""},n.opts=$.extend(!0,{},t.opts,i),a=n.type,l=n.src||"",a||(n.content?a="html":l.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?a="image":l.match(/\.(pdf)((\?|#).*)?$/i)?a="pdf":"#"===l.charAt(0)&&(a="inline"),n.type=a),n.index=t.group.length,n.opts.$orig&&!n.opts.$orig.length&&delete n.opts.$orig,!n.opts.$thumb&&n.opts.$orig&&(n.opts.$thumb=n.opts.$orig.find("img:first")),n.opts.$thumb&&!n.opts.$thumb.length&&delete n.opts.$thumb,"function"===$.type(n.opts.caption)?n.opts.caption=n.opts.caption.apply(o,[t,n]):"caption"in r?n.opts.caption=r.caption:i.$orig&&(n.opts.caption=s.attr("title")),n.opts.caption=void 0===n.opts.caption?"":n.opts.caption+"","ajax"===a&&(c=l.split(/\s+/,2),c.length>1&&(n.src=c.shift(),n.opts.selector=c.shift())),"auto"==n.opts.smallBtn&&($.inArray(a,["html","inline","ajax"])>-1?(n.opts.buttons=!1,n.opts.smallBtn=!0):n.opts.smallBtn=!1),"pdf"===a&&(n.type="iframe",n.opts.closeBtn=!0,n.opts.smallBtn=!1,n.opts.iframe.preload=!1),n.opts.modal&&$.extend(!0,n.opts,{infobar:0,buttons:0,keyboard:0,slideShow:0,fullScreen:0,closeClickOutside:0}),t.group.push(n)})},addEvents:function(){var t=this;t.removeEvents(),t.$refs.container.on("click.fb-close","[data-envirabox-close]",function(e){e.stopPropagation(),e.preventDefault(),t.close(e)}).on("click.fb-previous","[data-envirabox-previous]",function(e){e.stopPropagation(),e.preventDefault(),t.previous()}).on("click.fb-next","[data-envirabox-next]",function(e){e.stopPropagation(),e.preventDefault(),t.next()}),$(e).on("orientationchange.fb resize.fb",function(e){c(function(){e&&e.originalEvent&&"resize"===e.originalEvent.type?t.update():(t.$refs.slider_wrap.hide(),c(function(){t.$refs.slider_wrap.show(),t.update()}))})}),s.on("focusin.fb",function(e){var o=$.fancybox?$.fancybox.getInstance():null;!o||$(e.target).hasClass("envirabox-container")||$.contains(o.$refs.container[0],e.target)||(e.stopPropagation(),o.focus(),r.scrollTop(t.scrollTop).scrollLeft(t.scrollLeft))}),s.on("keydown.fb",function(e){var o=t.current,n=e.keyCode||e.which;if(o&&o.opts.keyboard&&!$(e.target).is("input")&&!$(e.target).is("textarea")){if(8===n||27===n)return e.preventDefault(),void t.close(e);switch(n){case 37:case 38:e.preventDefault(),t.previous();break;case 39:case 40:e.preventDefault(),t.next();break;case 80:case 32:e.preventDefault(),t.SlideShow&&(e.preventDefault(),t.SlideShow.toggle());break;case 70:t.FullScreen&&(e.preventDefault(),t.FullScreen.toggle());break;case 71:t.Thumbs&&(e.preventDefault(),t.Thumbs.toggle());break}}})},removeEvents:function(){r.off("scroll.fb resize.fb orientationchange.fb"),s.off("keydown.fb focusin.fb click.fb-close"),this.$refs.container.off("click.fb-close click.fb-previous click.fb-next")},previous:function(e){this.jumpTo(this.currIndex-1,e)},next:function(e){this.jumpTo(this.currIndex+1,e)},jumpTo:function(e,t){var o=this,n,i,r,s;if(n=o.firstRun=null===o.firstRun,i=r=e=parseInt(e,10),s=!!o.current&&o.current.opts.loop,!o.isAnimating&&(i!=o.currIndex||n)){if(o.group.length>1&&s)i%=o.group.length,i=i<0?o.group.length+i:i,2==o.group.length?r=e-o.currIndex+o.currPos:(r=i-o.currIndex+o.currPos,Math.abs(o.currPos-(r+o.group.length))<Math.abs(o.currPos-r)?r+=o.group.length:Math.abs(o.currPos-(r-o.group.length))<Math.abs(o.currPos-r)&&(r-=o.group.length));else if(!o.group[i])return void o.update(!1,!1,t);o.current&&(o.current.$slide.removeClass("envirabox-slide--current envirabox-slide--complete"),o.updateSlide(o.current,!0)),o.prevIndex=o.currIndex,o.prevPos=o.currPos,o.currIndex=i,o.currPos=r,o.current=o.createSlide(r),o.group.length>1&&((o.opts.loop||r-1>=0)&&o.createSlide(r-1),(o.opts.loop||r+1<o.group.length)&&o.createSlide(r+1)),o.current.isMoved=!1,o.current.isComplete=!1,t=parseInt(void 0===t?1.5*o.current.opts.speed:t,10),o.trigger("beforeMove"),o.updateControls(),n&&(o.current.$slide.addClass("envirabox-slide--current"),o.$refs.container.show(),c(function(){o.$refs.bg.css("transition-duration",o.current.opts.speed+"ms"),o.$refs.container.addClass("envirabox-container--ready")})),o.update(!0,!1,n?0:t,function(){o.afterMove()}),o.loadSlide(o.current),n&&o.current.$ghost||o.preload()}},createSlide:function(e){var t=this,o,n,i;if(n=e%t.group.length,n=n<0?t.group.length+n:n,!t.slides[e]&&t.group[n]){if(t.opts.loop&&t.group.length>2)for(var r in t.slides)if(t.slides[r].index===n)return i=t.slides[r],i.pos=e,t.slides[e]=i,delete t.slides[r],t.updateSlide(i),i;o=$('<div class="envirabox-slide"></div>').appendTo(t.$refs.slider),t.slides[e]=$.extend(!0,{},t.group[n],{pos:e,$slide:o,isMoved:!1,isLoaded:!1})}return t.slides[e]},zoomInOut:function(e,t,o){var n=this,i=n.current,r=i.$placeholder,s=i.opts.opacity,a=i.opts.$thumb,l=a?a.offset():0,c=i.$slide.offset(),p,u,h;return!!(r&&i.isMoved&&l&&d(a))&&(!("In"===e&&!n.firstRun)&&($.fancybox.stop(r),n.isAnimating=!0,p={top:l.top-c.top+parseFloat(a.css("border-top-width")||0),left:l.left-c.left+parseFloat(a.css("border-left-width")||0),width:a.width(),height:a.height(),scaleX:1,scaleY:1},"auto"==s&&(s=Math.abs(i.width/i.height-p.width/p.height)>.1),"In"===e?(u=p,h=n.getFitPos(i),h.scaleX=h.width/u.width,h.scaleY=h.height/u.height,s&&(u.opacity=.1,h.opacity=1)):(u=$.fancybox.getTranslate(r),h=p,i.$ghost&&(i.$ghost.show(),i.$image&&i.$image.remove()),u.scaleX=u.width/h.width,u.scaleY=u.height/h.height,u.width=h.width,u.height=h.height,s&&(h.opacity=0)),n.updateCursor(h.width,h.height),delete h.width,delete h.height,$.fancybox.setTranslate(r,u),r.show(),n.trigger("beforeZoom"+e),r.css("transition","all "+t+"ms"),$.fancybox.setTranslate(r,h),setTimeout(function(){var t;r.css("transition","none"),t=$.fancybox.getTranslate(r),t.scaleX=1,t.scaleY=1,$.fancybox.setTranslate(r,t),n.trigger("afterZoom"+e),o.apply(n),n.isAnimating=!1},t),!0))},canPan:function(){var e=this,t=e.current,o=t.$placeholder,n=!1;return o&&(n=e.getFitPos(t),n=Math.abs(o.width()-n.width)>1||Math.abs(o.height()-n.height)>1),n},isScaledDown:function(){var e=this,t=e.current,o=t.$placeholder,n=!1;return o&&(n=$.fancybox.getTranslate(o),n=n.width<t.width||n.height<t.height),n},scaleToActual:function(e,t,o){var n=this,i=n.current,r=i.$placeholder,s,a,l,c,d,p=parseInt(i.$slide.width(),10),u=parseInt(i.$slide.height(),10),h=i.width,f=i.height;r&&(n.isAnimating=!0,e=void 0===e?.5*p:e,t=void 0===t?.5*u:t,s=$.fancybox.getTranslate(r),c=h/s.width,d=f/s.height,a=.5*p-.5*h,l=.5*u-.5*f,h>p&&(a=s.left*c-(e*c-e),a>0&&(a=0),a<p-h&&(a=p-h)),f>u&&(l=s.top*d-(t*d-t),l>0&&(l=0),l<u-f&&(l=u-f)),n.updateCursor(h,f),$.fancybox.animate(r,null,{top:l,left:a,scaleX:c,scaleY:d},o||i.opts.speed,function(){n.isAnimating=!1}))},scaleToFit:function(e){var t=this,o=t.current,n=o.$placeholder,i;n&&(t.isAnimating=!0,i=t.getFitPos(o),t.updateCursor(i.width,i.height),$.fancybox.animate(n,null,{top:i.top,left:i.left,scaleX:i.width/n.width(),scaleY:i.height/n.height()},e||o.opts.speed,function(){t.isAnimating=!1}))},getFitPos:function(e){var t=e.$placeholder||e.$content,o=e.width,n=e.height,i=e.opts.margin,s,a,l,c,d,p,u;return!(!t||!t.length||!o&&!n)&&("number"===$.type(i)&&(i=[i,i]),2==i.length&&(i=[i[0],i[1],i[0],i[1]]),r.width()<800&&(i=[0,0,0,0]),s=parseInt(e.$slide.width(),10)-(i[1]+i[3]),a=parseInt(e.$slide.height(),10)-(i[0]+i[2]),l=Math.min(1,s/o,a/n),p=Math.floor(l*o),u=Math.floor(l*n),c=Math.floor(.5*(a-u))+i[0],d=Math.floor(.5*(s-p))+i[3],{top:c,left:d,width:p,height:u})},update:function(e,t,o,n){var i=this,r;!0!==i.isAnimating&&i.current&&(r=i.current.pos*Math.floor(i.current.$slide.width())*-1-i.current.pos*i.current.opts.gutter,o=parseInt(o,10)||0,$.fancybox.stop(i.$refs.slider),!1===e?i.updateSlide(i.current,t):$.each(i.slides,function(e,o){i.updateSlide(o,t)}),o?$.fancybox.animate(i.$refs.slider,null,{top:0,left:r},o,function(){i.current.isMoved=!0,"function"===$.type(n)&&n.apply(i)}):($.fancybox.setTranslate(i.$refs.slider,{top:0,left:r}),i.current.isMoved=!0,"function"===$.type(n)&&n.apply(i)))},updateSlide:function(e,t){var o=this,n=e.$placeholder,i;(e=e||o.current)&&!o.isClosing&&(i=e.pos*Math.floor(e.$slide.width())+e.pos*e.opts.gutter,i!==e.leftPos&&($.fancybox.setTranslate(e.$slide,{top:0,left:i}),e.leftPos=i),!1!==t&&n&&($.fancybox.setTranslate(n,o.getFitPos(e)),e.pos===o.currPos&&o.updateCursor()),e.$slide.trigger("refresh"),o.trigger("onUpdate",e))},updateCursor:function(e,t){var o=this,n,i=o.$refs.container.removeClass("envirabox-controls--canzoomIn envirabox-controls--canzoomOut envirabox-controls--canGrab");!o.isClosing&&o.opts.touch&&(n=void 0!==e&&void 0!==t?e<o.current.width&&t<o.current.height:o.isScaledDown(),n?i.addClass("envirabox-controls--canzoomIn"):o.group.length<2?i.addClass("envirabox-controls--canzoomOut"):i.addClass("envirabox-controls--canGrab"))},loadSlide:function(e){var t=this,o,n,i;if(e&&!e.isLoaded&&!e.isLoading){switch(e.isLoading=!0,t.trigger("beforeLoad",e),o=e.type,n=e.$slide,n.off("refresh").trigger("onReset").addClass("envirabox-slide--"+(o||"unknown")).addClass(e.opts.slideClass),o){case"image":t.setImage(e);break;case"iframe":t.setIframe(e);break;case"html":t.setContent(e,e.content);break;case"inline":$(e.src).length?t.setContent(e,$(e.src)):t.setError(e);break;case"ajax":t.showLoading(e),i=$.ajax($.extend({},e.opts.ajax.settings,{url:e.src,success:function(o,n){"success"===n&&t.setContent(e,o)},error:function(o,n){o&&"abort"!==n&&t.setError(e)}})),n.one("onReset",function(){i.abort()});break;default:t.setError(e);break}return!0}},setImage:function(t){var o=this,n=t.opts.image.srcset,i,r,s,a;if(t.isLoaded&&!t.hasError)return void o.afterLoad(t);if(n){s=e.devicePixelRatio||1,a=e.innerWidth*s,r=n.split(",").map(function(e){var t={};return e.trim().split(/\s+/).forEach(function(e,o){var n=parseInt(e.substring(0,e.length-1),10);if(0===o)return t.url=e;n&&(t.value=n,t.postfix=e[e.length-1])}),t}),r.sort(function(e,t){return e.value-t.value});for(var l=0;l<r.length;l++){var c=r[l];if("w"===c.postfix&&c.value>=a||"x"===c.postfix&&c.value>=s){i=c;break}}!i&&r.length&&(i=r[r.length-1]),i&&(t.src=i.url,t.width&&t.height&&"w"==i.postfix&&(t.height=t.width/t.height*i.value,t.width=i.value))}t.$placeholder=$('<div class="envirabox-placeholder"></div>').hide().appendTo(t.$slide),!1!==t.opts.preload&&t.opts.width&&t.opts.height&&(t.opts.thumb||t.opts.$thumb)?(t.width=t.opts.width,t.height=t.opts.height,t.$ghost=$("<img />").one("load error",function(){o.isClosing||($("<img/>")[0].src=t.src,o.revealImage(t,function(){o.setBigImage(t),o.firstRun&&t.index===o.currIndex&&o.preload()}))}).addClass("envirabox-image").appendTo(t.$placeholder).attr("src",t.opts.thumb||t.opts.$thumb.attr("src"))):o.setBigImage(t)},setBigImage:function(e){var t=this,o=$("<img />");e.$image=o.one("error",function(){t.setError(e)}).one("load",function(){clearTimeout(e.timouts),e.timouts=null,t.isClosing||(e.width=this.naturalWidth,e.height=this.naturalHeight,e.opts.image.srcset&&o.attr("sizes","100vw").attr("srcset",e.opts.image.srcset),t.afterLoad(e),e.$ghost&&(e.timouts=setTimeout(function(){e.$ghost.hide()},350)))}).addClass("envirabox-image").attr("src",e.src).appendTo(e.$placeholder),o[0].complete?o.trigger("load"):o[0].error?o.trigger("error"):e.timouts=setTimeout(function(){o[0].complete||e.hasError||t.showLoading(e)},150),e.opts.image.protect&&$('<div class="envirabox-spaceball"></div>').appendTo(e.$placeholder).on("contextmenu.fb",function(e){return 2==e.button&&e.preventDefault(),!0})},revealImage:function(e,t){var o=this;if(t=t||$.noop,"image"!==e.type||e.hasError||!0===e.isRevealed)return void t.apply(o);e.isRevealed=!0,e.pos===o.currPos&&o.zoomInOut("In",e.opts.speed,t)||(e.$ghost&&!e.isLoaded&&o.updateSlide(e,!0),e.pos===o.currPos?$.fancybox.animate(e.$placeholder,{opacity:0},{opacity:1},300,t):e.$placeholder.show(),t.apply(o))},setIframe:function(e){var t=this,o=e.opts.iframe,n=e.$slide,i;e.$content=$('<div class="envirabox-content"></div>').css(o.css).appendTo(n),i=$(o.tpl.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",$.fancybox.isTouch?"auto":o.scrolling).appendTo(e.$content),o.preload?(e.$content.addClass("envirabox-tmp"),t.showLoading(e),i.on("load.fb error.fb",function(o){this.isReady=1,e.$slide.trigger("refresh"),t.afterLoad(e)}),n.on("refresh.fb",function(){var t=e.$content,n,r,s,a,l;if(1===i[0].isReady){try{n=i.contents(),r=n.find("body")}catch(e){}r&&r.length&&(void 0===o.css.width||void 0===o.css.height)&&(s=i[0].contentWindow.document.documentElement.scrollWidth,a=Math.ceil(r.outerWidth(!0)+(t.width()-s)),l=Math.ceil(r.outerHeight(!0)),t.css({width:void 0===o.css.width?a+(t.outerWidth()-t.innerWidth()):o.css.width,height:void 0===o.css.height?l+(t.outerHeight()-t.innerHeight()):o.css.height})),t.removeClass("envirabox-tmp")}})):this.afterLoad(e),i.attr("src",e.src),e.opts.smallBtn&&e.$content.prepend(e.opts.closeTpl),n.one("onReset",function(){try{$(this).find("iframe").hide().attr("src","//about:blank")}catch(e){}$(this).empty(),e.isLoaded=!1})},setContent:function(e,t){var o=this;o.isClosing||(o.hideLoading(e),e.$slide.empty(),l(t)&&t.parent().length?(t.data("placeholder")&&t.parents(".envirabox-slide").trigger("onReset"),t.data({placeholder:$("<div></div>").hide().insertAfter(t)}).css("display","inline-block")):("string"===$.type(t)&&(t=$("<div>").append(t).contents(),3===t[0].nodeType&&(t=$("<div>").html(t))),e.opts.selector&&(t=$("<div>").html(t).find(e.opts.selector))),e.$slide.one("onReset",function(){var o=l(t)?t.data("placeholder"):0;o&&(t.hide().replaceAll(o),t.data("placeholder",null)),e.hasError||($(this).empty(),e.isLoaded=!1)}),e.$content=$(t).appendTo(e.$slide),!0===e.opts.smallBtn&&e.$content.find(".envirabox-close-small").remove().end().eq(0).append(e.opts.closeTpl),this.afterLoad(e))},setError:function(e){e.hasError=!0,this.setContent(e,e.opts.errorTpl)},showLoading:function(e){var t=this;(e=e||t.current)&&!e.$spinner&&(e.$spinner=$(t.opts.spinnerTpl).appendTo(e.$slide))},hideLoading:function(e){var t=this;(e=e||t.current)&&e.$spinner&&(e.$spinner.remove(),delete e.$spinner)},afterMove:function(){var e=this,t=e.current,o={};t&&(t.$slide.siblings().trigger("onReset"),$.each(e.slides,function(t,n){n.pos>=e.currPos-1&&n.pos<=e.currPos+1?o[n.pos]=n:n&&n.$slide.remove()}),e.slides=o,e.trigger("afterMove"),t.isLoaded&&e.complete())},afterLoad:function(e){var t=this;t.isClosing||(e.isLoading=!1,e.isLoaded=!0,t.trigger("afterLoad",e),t.hideLoading(e),e.$ghost||t.updateSlide(e,!0),e.index===t.currIndex&&e.isMoved?t.complete():e.$ghost||t.revealImage(e))},complete:function(){var e=this,t=e.current;e.revealImage(t,function(){t.isComplete=!0,t.$slide.addClass("envirabox-slide--complete"),e.updateCursor(),e.trigger("onComplete"),t.opts.focus&&"image"!==t.type&&"iframe"!==t.type&&e.focus()})},preload:function(){var e=this,t,o;e.group.length<2||(t=e.slides[e.currPos+1],o=e.slides[e.currPos-1],t&&"image"===t.type&&e.loadSlide(t),o&&"image"===o.type&&e.loadSlide(o))},focus:function(){var e=this.current,t;t=e&&e.isComplete?e.$slide.find('button,:input,[tabindex],a:not(".disabled")').filter(":visible:first"):null,t&&t.length||(t=this.$refs.container),t.focus(),this.$refs.slider_wrap.scrollLeft(0),e&&e.$slide.scrollTop(0)},activate:function(){var e=this;$(".envirabox-container").each(function(){var t=$(this).data("FancyBox");t&&t.uid!==e.uid&&!t.isClosing&&t.trigger("onDeactivate")}),e.current&&(e.$refs.container.index()>0&&e.$refs.container.prependTo(t.body),e.updateControls()),e.trigger("onActivate"),e.addEvents()},close:function(e){var t=this,o=t.current,n=o.opts.speed,i=$.proxy(function(){t.cleanUp(e)},this);return!t.isAnimating&&!t.isClosing&&(!1===t.trigger("beforeClose",e)?($.fancybox.stop(t.$refs.slider),void c(function(){t.update(!0,!0,150)})):(t.isClosing=!0,o.timouts&&clearTimeout(o.timouts),!0!==e&&$.fancybox.stop(t.$refs.slider),t.$refs.container.removeClass("envirabox-container--active").addClass("envirabox-container--closing"),o.$slide.removeClass("envirabox-slide--complete").siblings().remove(),o.isMoved||o.$slide.css("overflow","visible"),t.removeEvents(),t.hideLoading(o),t.hideControls(),t.updateCursor(),t.$refs.bg.css("transition-duration",n+"ms"),this.$refs.container.removeClass("envirabox-container--ready"),void(!0===e?setTimeout(i,n):t.zoomInOut("Out",n,i)||$.fancybox.animate(t.$refs.container,null,{opacity:0},n,"easeInSine",i))))},cleanUp:function(e){var t=this,o;t.$refs.slider.children().trigger("onReset"),t.$refs.container.empty().remove(),t.trigger("afterClose",e),t.current=null,o=$.fancybox.getInstance(),o?o.activate():($("html").removeClass("envirabox-enabled"),$("body").removeAttr("style"),r.scrollTop(t.scrollTop).scrollLeft(t.scrollLeft),$("#envirabox-noscroll").remove()),t.$lastFocus&&t.$lastFocus.focus()},trigger:function(e,o){var n=Array.prototype.slice.call(arguments,1),i=this,r=o&&o.opts?o:i.current,s;if(r?n.unshift(r):r=i,n.unshift(i),$.isFunction(r.opts[e])&&(s=r.opts[e].apply(r,n)),!1===s)return s;"afterClose"===e?$(t).trigger(e+".fb",n):i.$refs.container.trigger(e+".fb",n)},toggleControls:function(e){this.isHiddenControls?this.updateControls(e):this.hideControls()},hideControls:function(){this.isHiddenControls=!0,this.$refs.container.removeClass("envirabox-show-controls"),this.$refs.container.removeClass("envirabox-show-caption")},updateControls:function(e){var t=this,o=t.$refs.container,n=t.$refs.caption,i=t.current,r=i.index,s=i.opts,a=s.caption;this.isHiddenControls&&!0!==e||(this.isHiddenControls=!1,o.addClass("envirabox-show-controls").toggleClass("envirabox-show-infobar",!!s.infobar&&t.group.length>1).toggleClass("envirabox-show-buttons",!!s.buttons).toggleClass("envirabox-is-modal",!!s.modal),$(".envirabox-button--left",o).toggleClass("envirabox-button--disabled",!s.loop&&r<=0),$(".envirabox-button--right",o).toggleClass("envirabox-button--disabled",!s.loop&&r>=t.group.length-1),$(".envirabox-button--play",o).toggle(!!(s.slideShow&&t.group.length>1)),$(".envirabox-button--close",o).toggle(!!s.closeBtn),$(".js-envirabox-count",o).html(t.group.length),$(".js-envirabox-index",o).html(r+1),i.$slide.trigger("refresh"),n&&n.empty(),a&&a.length?(n.html(a),this.$refs.container.addClass("envirabox-show-caption "),t.$caption=n):this.$refs.container.removeClass("envirabox-show-caption"))}}),$.fancybox={version:"{envirabox-version}",defaults:i,getInstance:function(e){var t=$('.envirabox-container:not(".envirabox-container--closing"):first').data("FancyBox"),o=Array.prototype.slice.call(arguments,1);return t instanceof p&&("string"===$.type(e)?t[e].apply(t,o):"function"===$.type(e)&&e.apply(t,o),t)},open:function(e,t,o){return new p(e,t,o)},close:function(e){var t=this.getInstance();t&&(t.close(),!0===e&&this.close())},isTouch:void 0!==t.createTouch&&/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),use3d:function(){var o=t.createElement("div");return e.getComputedStyle(o).getPropertyValue("transform")&&!(t.documentMode&&t.documentMode<=11)}(),getTranslate:function(e){var t,o;return!(!e||!e.length)&&(t=e.get(0).getBoundingClientRect(),o=e.eq(0).css("transform"),o&&-1!==o.indexOf("matrix")?(o=o.split("(")[1],o=o.split(")")[0],o=o.split(",")):o=[],o.length?(o=o.length>10?[o[13],o[12],o[0],o[5]]:[o[5],o[4],o[0],o[3]],o=o.map(parseFloat)):o=[0,0,1,1],{top:o[0],left:o[1],scaleX:o[2],scaleY:o[3],opacity:parseFloat(e.css("opacity")),width:t.width,height:t.height})},setTranslate:function(e,t){var o="",n={};if(e&&t)return void 0===t.left&&void 0===t.top||(o=(void 0===t.left?e.position().top:t.left)+"px, "+(void 0===t.top?e.position().top:t.top)+"px",o=this.use3d?"translate3d("+o+", 0px)":"translate("+o+")"),void 0!==t.scaleX&&void 0!==t.scaleY&&(o=(o.length?o+" ":"")+"scale("+t.scaleX+", "+t.scaleY+")"),o.length&&(n.transform=o),void 0!==t.opacity&&(n.opacity=t.opacity),void 0!==t.width&&(n.width=t.width),void 0!==t.height&&(n.height=t.height),e.css(n)},easing:{easeOutCubic:function(e,t,o,n){return o*((e=e/n-1)*e*e+1)+t},easeInCubic:function(e,t,o,n){return o*(e/=n)*e*e+t},easeOutSine:function(e,t,o,n){return o*Math.sin(e/n*(Math.PI/2))+t},easeInSine:function(e,t,o,n){return-o*Math.cos(e/n*(Math.PI/2))+o+t}},stop:function(e){e.removeData("animateID")},animate:function(e,t,o,n,i,r){var s=this,a=null,l=0,d,p,u,h=function(){void 0!==o.scaleX&&void 0!==o.scaleY&&t&&void 0!==t.width&&void 0!==t.height&&(o.width=t.width*o.scaleX,o.height=t.height*o.scaleY,o.scaleX=1,o.scaleY=1),s.setTranslate(e,o),r()},f=function(r){if(d=[],p=0,e.length&&e.data("animateID")===u){if(r=r||Date.now(),a&&(p=r-a),a=r,(l+=p)>=n)return void h();for(var g in o)o.hasOwnProperty(g)&&void 0!==t[g]&&(t[g]==o[g]?d[g]=o[g]:d[g]=s.easing[i](l,t[g],o[g]-t[g],n));s.setTranslate(e,d),c(f)}};s.animateID=u=void 0===s.animateID?1:s.animateID+1,e.data("animateID",u),void 0===r&&"function"==$.type(i)&&(r=i,i=void 0),i||(i="easeOutCubic"),r=r||$.noop,t?this.setTranslate(e,t):t=this.getTranslate(e),n?(e.show(),c(f)):h()}},$.fn.fancybox=function(e){return this.off("click.fb-start").on("click.fb-start",{items:this,options:e||{}},n),this},$(t).on("click.fb-start","[data-envirabox]",n)}}(window,document,window.jQuery);